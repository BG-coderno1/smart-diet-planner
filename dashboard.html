{% extends 'base.html' %}
{% block content %}
<h3>Welcome, {{ current_user.name }}</h3>

<div class="row">
  <div class="col-md-8">
    <h5>Your Plans</h5>
    {% if plans %}
      <ul class="list-group">
        {% for p in plans %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
      <strong>{{ p.name }}</strong> â€” {{ p.meals_count }} meals
    </div>
    <div>
      <a class="btn btn-sm btn-outline-primary me-2" href="{{ url_for('view_plan', plan_id=p.id) }}">View</a>

      <!-- ðŸ—‘ Delete Plan Button -->
      <form action="{{ url_for('delete_plan', plan_id=p.id) }}" method="POST" style="display:inline;">
        <button type="submit" class="btn btn-sm btn-outline-danger"
                onclick="return confirm('Are you sure you want to delete this plan?');">
          Delete
        </button>
      </form>
    </div>
  </li>
{% endfor %}
      </ul>
    {% else %}
      <p>No plans yet. <a href="{{ url_for('create_plan') }}">Create a plan</a></p>
    {% endif %}
  </div>
  <div class="col-md-4">
    <h5>Quick Actions</h5>
    <a class="btn btn-primary w-100 mb-2" href="{{ url_for('create_plan') }}">Create Diet Plan</a>
    <a class="btn btn-secondary w-100" href="{{ url_for('analyze_meals_route') }}">Analyze Meals</a>
  </div>
</div>
{% endblock %}
